(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{34:function(e,t,r){
/**
 * Twig.js
 *
 * @copyright 2011-2020 John Roepke and the Twig.js Contributors
 * @license   Available under the BSD 2-Clause License
 * @link      https://github.com/twigjs/twig.js
 */
e.exports=r(43)()},43:function(e,t,r){e.exports=function e(){var t={VERSION:"1.16.0"};return r(44)(t),r(45)(t),r(46)(t),r(48)(t),r(49)(t),r(50)(t),r(61)(t),r(62)(t),r(63)(t),r(64)(t),r(65)(t),r(66)(t),r(67)(t),r(68)(t),r(69)(t),t.exports.factory=e,t.exports}},44:function(e,t){e.exports=function(b){"use strict";function c(e,t){if(e.template.options.rethrow)throw"TwigException"!==(t="string"==typeof t?new b.Error(t):t).type||t.file||(t.file=e.template.id),t;if(b.log.error("Error parsing twig template "+e.template.id+": "),t.stack?b.log.error(t.stack):b.log.error(t.toString()),b.debug)return t.toString()}return b.trace=!1,b.debug=!1,b.cache=!0,b.noop=function(){},b.merge=function(t,r,s){return Object.keys(r).forEach(e=>{(!s||e in t)&&(t[e]=r[e])}),t},b.Error=function(e,t){this.message=e,this.name="TwigException",this.type="TwigException",this.file=t},b.Error.prototype.toString=function(){return this.name+": "+this.message},b.log={trace(...e){b.trace&&console&&console.log(Array.prototype.slice.call(e))},debug(...e){b.debug&&console&&console.log(Array.prototype.slice.call(e))}},"undefined"==typeof console?b.log.error=function(){}:void 0!==console.error?b.log.error=function(...e){console.error(...e)}:void 0!==console.log&&(b.log.error=function(...e){console.log(...e)}),b.token={},b.token.type={output:"output",logic:"logic",comment:"comment",raw:"raw",outputWhitespacePre:"output_whitespace_pre",outputWhitespacePost:"output_whitespace_post",outputWhitespaceBoth:"output_whitespace_both",logicWhitespacePre:"logic_whitespace_pre",logicWhitespacePost:"logic_whitespace_post",logicWhitespaceBoth:"logic_whitespace_both"},b.token.definitions=[{type:b.token.type.raw,open:"{% raw %}",close:"{% endraw %}"},{type:b.token.type.raw,open:"{% verbatim %}",close:"{% endverbatim %}"},{type:b.token.type.outputWhitespacePre,open:"{{-",close:"}}"},{type:b.token.type.outputWhitespacePost,open:"{{",close:"-}}"},{type:b.token.type.outputWhitespaceBoth,open:"{{-",close:"-}}"},{type:b.token.type.logicWhitespacePre,open:"{%-",close:"%}"},{type:b.token.type.logicWhitespacePost,open:"{%",close:"-%}"},{type:b.token.type.logicWhitespaceBoth,open:"{%-",close:"-%}"},{type:b.token.type.output,open:"{{",close:"}}"},{type:b.token.type.logic,open:"{%",close:"%}"},{type:b.token.type.comment,open:"{#",close:"#}"}],b.token.strings=['"',"'"],b.token.findStart=function(e){var t={position:null,def:null};let r=null;var s,n,o,i=b.token.definitions.length;let p;for(p=0;p<i;p++)s=b.token.definitions[p],n=e.indexOf(s.open),o=e.indexOf(s.close),b.log.trace("Twig.token.findStart: ","Searching for ",s.open," found at ",n),0<=n&&s.open.length!==s.close.length&&o<0||(0<=n&&(null===t.position||n<t.position)||0<=n&&null!==t.position&&n===t.position&&(s.open.length>t.def.open.length||s.open.length===t.def.open.length&&(s.close.length,t.def.close.length,0<=o)&&o<r))&&(t.position=n,t.def=s,r=o);return t},b.token.findEnd=function(e,t,r){let s=null,n=!1,o=0,i=null,p=null;var a;let l=null;var c,u,h;let y;for(;!n;){if(i=null,p=null,!(0<=(a=e.indexOf(t.close,o))))throw new b.Error("Unable to find closing bracket '"+t.close+"' opened near template position "+r);if(s=a,n=!0,t.type===b.token.type.comment)break;if(t.type===b.token.type.raw)break;for(h=b.token.strings.length,y=0;y<h;y+=1)0<(c=e.indexOf(b.token.strings[y],o))&&c<a&&(null===i||c<i)&&(i=c,p=b.token.strings[y]);if(null!==i)for(l=i+1,s=null,n=!1;;){if((u=e.indexOf(p,l))<0)throw b.Error("Unclosed string in template");if("\\"!==e.slice(u-1,u)){o=u+1;break}l=u+1}}return s},b.tokenize=function(e){var t=[];let r=0;var s;let n=null;for(;0<e.length;)if(s=b.token.findStart(e),b.log.trace("Twig.tokenize: ","Found token: ",s),null===s.position)t.push({type:b.token.type.raw,value:e}),e="";else{if(0<s.position&&t.push({type:b.token.type.raw,value:e.slice(0,Math.max(0,s.position))}),e=e.slice(s.position+s.def.open.length),r+=s.position+s.def.open.length,n=b.token.findEnd(e,s.def,r),b.log.trace("Twig.tokenize: ","Token ends at ",n),t.push({type:s.def.type,value:e.slice(0,Math.max(0,n)).trim()}),"\n"===e.slice(n+s.def.close.length,n+s.def.close.length+1))switch(s.def.type){case"logic_whitespace_pre":case"logic_whitespace_post":case"logic_whitespace_both":case"logic":n+=1}e=e.slice(n+s.def.close.length),r+=n+s.def.close.length}return t},b.compile=function(e){const l=this;try{const m=[],x=[];let t=[];var c;let r=null;var u;let s=null;var h=null,y=null;let n=null;var d=null;let o=null,i=null,p=null,a=null;for(var f=function(e){b.expression.compile.call(l,e),(0<x.length?t:m).push(e)},g=function(e){if(r=b.logic.compile.call(l,e),i=r.type,p=b.logic.handler[i].open,a=b.logic.handler[i].next,b.log.trace("Twig.compile: ","Compiled logic token to ",r," next is: ",a," open is : ",p),void 0!==p&&!p){if(s=x.pop(),!(n=b.logic.handler[s.type]).next.includes(i))throw new Error(i+" not expected after a "+s.type);s.output=s.output||[],s.output=s.output.concat(t),t=[],o={type:b.token.type.logic,token:s},(0<x.length?t:m).push(o)}void 0!==a&&0<a.length?(b.log.trace("Twig.compile: ","Pushing ",r," to logic stack."),0<x.length&&((s=x.pop()).output=s.output||[],s.output=s.output.concat(t),x.push(s),t=[]),x.push(r)):void 0!==p&&p&&(o={type:b.token.type.logic,token:r},(0<x.length?t:m).push(o))};0<e.length;){switch(c=e.shift(),h=m[m.length-1],y=t[t.length-1],d=e[0],b.log.trace("Compiling token ",c),c.type){case b.token.type.raw:(0<x.length?t:m).push(c);break;case b.token.type.logic:g.call(l,c);break;case b.token.type.comment:break;case b.token.type.output:f.call(l,c);break;case b.token.type.logicWhitespacePre:case b.token.type.logicWhitespacePost:case b.token.type.logicWhitespaceBoth:case b.token.type.outputWhitespacePre:case b.token.type.outputWhitespacePost:case b.token.type.outputWhitespaceBoth:switch(c.type!==b.token.type.outputWhitespacePost&&c.type!==b.token.type.logicWhitespacePost&&(h&&h.type===b.token.type.raw&&(m.pop(),h.value=h.value.trimEnd(),m.push(h)),y)&&y.type===b.token.type.raw&&(t.pop(),y.value=y.value.trimEnd(),t.push(y)),c.type){case b.token.type.outputWhitespacePre:case b.token.type.outputWhitespacePost:case b.token.type.outputWhitespaceBoth:f.call(l,c);break;case b.token.type.logicWhitespacePre:case b.token.type.logicWhitespacePost:case b.token.type.logicWhitespaceBoth:g.call(l,c)}c.type!==b.token.type.outputWhitespacePre&&c.type!==b.token.type.logicWhitespacePre&&d&&d.type===b.token.type.raw&&(e.shift(),d.value=d.value.trimStart(),e.unshift(d))}b.log.trace("Twig.compile: "," Output: ",m," Logic Stack: ",x," Pending Output: ",t)}if(0<x.length)throw u=x.pop(),new Error("Unable to find an end tag for "+u.type+", expecting one of "+u.next);return m}catch(e){if(l.options.rethrow)throw"TwigException"!==e.type||e.file||(e.file=l.id),e;b.log.error("Error compiling twig template "+l.id+": "),e.stack?b.log.error(e.stack):b.log.error(e.toString())}},b.prepare=function(e){b.log.debug("Twig.prepare: ","Tokenizing ",e);e=b.tokenize.call(this,e),b.log.debug("Twig.prepare: ","Compiling ",e),e=b.compile.call(this,e);return b.log.debug("Twig.prepare: ","Compiled ",e),e},b.output=function(e){var t=this.options["autoescape"];if(!t)return e.join("");const r="string"==typeof t?t:"html";t=e.map(e=>e=!e||!0===e.twigMarkup||e.twigMarkup===r||"html"===r&&"html_attr"===e.twigMarkup?e:b.filters.escape(e,[r]));return 0===t.length||0===(e=t.join("")).length?"":new b.Markup(e,!0)},b.Templates={loaders:{},parsers:{},registry:{}},b.validateId=function(e){if("prototype"===e)throw new b.Error(e+" is not a valid twig identifier");if(b.cache&&Object.hasOwnProperty.call(b.Templates.registry,e))throw new b.Error("There is already a template with the ID "+e);return!0},b.Templates.registerLoader=function(e,t,r){if("function"!=typeof t)throw new b.Error("Unable to add loader for "+e+": Invalid function reference given.");r&&(t=t.bind(r)),this.loaders[e]=t},b.Templates.unRegisterLoader=function(e){this.isRegisteredLoader(e)&&delete this.loaders[e]},b.Templates.isRegisteredLoader=function(e){return Object.hasOwnProperty.call(this.loaders,e)},b.Templates.registerParser=function(e,t,r){if("function"!=typeof t)throw new b.Error("Unable to add parser for "+e+": Invalid function regerence given.");r&&(t=t.bind(r)),this.parsers[e]=t},b.Templates.unRegisterParser=function(e){this.isRegisteredParser(e)&&delete this.parsers[e]},b.Templates.isRegisteredParser=function(e){return Object.hasOwnProperty.call(this.parsers,e)},b.Templates.save=function(e){if(void 0===e.id)throw new b.Error("Unable to save template with no id");b.Templates.registry[e.id]=e},b.Templates.load=function(e){return Object.hasOwnProperty.call(b.Templates.registry,e)?b.Templates.registry[e]:null},b.Templates.loadRemote=function(e,t,r,s){var n=void 0===t.id?e:t.id,o=b.Templates.registry[n];return b.cache&&void 0!==o?("function"==typeof r&&r(o),o):(t.parser=t.parser||"twig",t.id=n,void 0===t.async&&(t.async=!0),(this.loaders[t.method]||this.loaders.fs).call(this,e,t,r,s))},b.Block=function(e,t){this.template=e,this.token=t},b.Block.prototype.render=function(t,r){const s=t.template;let e;return t.template=this.template,(e=this.token.expression?b.expression.parseAsync.call(t,this.token.output,r):t.parseAsync(this.token.output,r)).then(e=>b.expression.parseAsync.call(t,{type:b.expression.type.string,value:e},r)).then(e=>(t.template=s,e))},b.ParseState=function(e,t,r){this.renderedBlocks={},this.overrideBlocks=void 0===t?{}:t,this.context=void 0===r?{}:r,this.macros={},this.nestingStack=[],this.template=e},b.ParseState.prototype.getBlock=function(e,t){let r;return r=void 0===(r=void 0===(r=!0!==t?this.overrideBlocks[e]:r)?this.template.getBlock(e,t):r)&&null!==this.template.parentTemplate?this.template.parentTemplate.getBlock(e):r},b.ParseState.prototype.getBlocks=function(e){let t={};return t={...t=!1!==e&&null!==this.template.parentTemplate&&this.template.parentTemplate!==this.template?this.template.parentTemplate.getBlocks():t,...this.template.getBlocks(),...this.overrideBlocks}},b.ParseState.prototype.getNestingStackToken=function(t){let r;return this.nestingStack.forEach(e=>{void 0===r&&e.type===t&&(r=e)}),r},b.ParseState.prototype.parse=function(e,t,r){const s=this;let n=[],o=null,i=!0;let p=!0;function a(e){n.push(e)}function l(e){void 0!==e.chain&&(p=e.chain),void 0!==e.context&&(s.context=e.context),void 0!==e.output&&n.push(e.output)}if(t&&(s.context=t),t=b.async.forEach(e,e=>{switch(b.log.debug("Twig.ParseState.parse: ","Parsing token: ",e),e.type){case b.token.type.raw:n.push(b.filters.raw(e.value));break;case b.token.type.logic:return b.logic.parseAsync.call(s,e.token,s.context,p).then(l);case b.token.type.comment:break;case b.token.type.outputWhitespacePre:case b.token.type.outputWhitespacePost:case b.token.type.outputWhitespaceBoth:case b.token.type.output:return b.log.debug("Twig.ParseState.parse: ","Output token: ",e.stack),b.expression.parseAsync.call(s,e.stack,s.context).then(a)}}).then(()=>(n=b.output.call(s.template,n),i=!1,n)).catch(e=>{r&&c(s,e),o=e}),r)return t;if(null!==o)return c(s,o);if(i)throw new b.Error("You are using Twig.js in sync mode in combination with async extensions.");return n},b.Template=function(e){var{data:e,id:t,base:r,path:s,url:n,name:o,method:i,options:p}=e;this.base=r,this.blocks={defined:{},imported:{}},this.id=t,this.method=i,this.name=o,this.options=p,this.parentTemplate=null,this.path=s,this.url=n,r="String",i=e,o=Object.prototype.toString.call(i).slice(8,-1),this.tokens=null!=i&&o===r?b.prepare.call(this,e):e,void 0!==t&&b.Templates.save(this)},b.Template.prototype.getBlock=function(e,t,r=!0){let s;return!0!==t&&(s=this.blocks.defined[e]),s=void 0===(s=r&&void 0===s?this.blocks.imported[e]:s)&&null!==this.parentTemplate?this.parentTemplate.getBlock(e,t,r=!1):s},b.Template.prototype.getBlocks=function(){return{...{},...this.blocks.imported,...this.blocks.defined}},b.Template.prototype.render=function(e,n,t){const o=this;return n=n||{},b.async.potentiallyAsync(o,t,()=>{const s=new b.ParseState(o,n.blocks,e);return s.parseAsync(o.tokens).then(e=>{let t;var r;return null!==o.parentTemplate?(o.options.allowInlineIncludes&&(t=b.Templates.load(o.parentTemplate))&&(t.options=o.options),t||(r=b.path.parsePath(o,o.parentTemplate),t=b.Templates.loadRemote(r,{method:o.getLoaderMethod(),base:o.base,async:!1,id:r,options:o.options})),o.parentTemplate=t,o.parentTemplate.renderAsync(s.context,{blocks:s.getBlocks(!1),isInclude:!0})):!0===n.isInclude?e:e.valueOf()})})},b.Template.prototype.importFile=function(e){var t;let r;if(this.url||!this.options.allowInlineIncludes)return t=b.path.parsePath(this,e),r=b.Templates.loadRemote(t,{method:this.getLoaderMethod(),base:this.base,async:!1,options:this.options,id:t});if(e=this.path?b.path.parsePath(this,e):e,r=(r=b.Templates.load(e))||b.Templates.loadRemote(null,{id:e,method:this.getLoaderMethod(),async:!1,path:e,options:this.options}))return r.options=this.options,r;throw new b.Error("Unable to find the template "+e)},b.Template.prototype.getLoaderMethod=function(){return this.path?"fs":this.url?"ajax":this.method||"fs"},b.Template.prototype.compile=function(e){return b.compiler.compile(this,e)},b.Markup=function(e,t){return"string"!=typeof e||((e=new String(e)).twigMarkup=void 0===t||t),e},b}},45:function(e,t){e.exports=function(n){return n.compiler={module:{}},n.compiler.compile=function(e,t){var r=JSON.stringify(e.tokens),e=e["id"];let s=null;if(t.module){if(void 0===n.compiler.module[t.module])throw new n.Error("Unable to find module type "+t.module);s=n.compiler.module[t.module](e,r,t.twig)}else s=n.compiler.wrap(e,r);return s},n.compiler.module={amd(e,t,r){return'define(["'+r+'"], function (Twig) {\n\tvar twig, templates;\ntwig = Twig.twig;\ntemplates = '+n.compiler.wrap(e,t)+"\n\treturn templates;\n});"},node(e,t){return'var twig = require("twig").twig;\nexports.template = '+n.compiler.wrap(e,t)},cjs2(e,t,r){return'module.declare([{ twig: "'+r+'" }], function (require, exports, module) {\n\tvar twig = require("twig").twig;\n\texports.template = '+n.compiler.wrap(e,t)+"\n});"}},n.compiler.wrap=function(e,t){return'twig({id:"'+e.replace('"','\\"')+'", data:'+t+", precompiled: true});\n"},n}},46:function(e,t,r){e.exports=function(u){"use strict";function l(e,t,r){return t?u.expression.parseAsync.call(e,t,r):u.Promise.resolve(!1)}for(u.expression={},r(47)(u),u.expression.reservedWords=["true","false","null","TRUE","FALSE","NULL","_context","and","b-and","or","b-or","b-xor","in","not in","if","matches","starts","ends","with"],u.expression.type={comma:"Twig.expression.type.comma",operator:{unary:"Twig.expression.type.operator.unary",binary:"Twig.expression.type.operator.binary"},string:"Twig.expression.type.string",bool:"Twig.expression.type.bool",slice:"Twig.expression.type.slice",array:{start:"Twig.expression.type.array.start",end:"Twig.expression.type.array.end"},object:{start:"Twig.expression.type.object.start",end:"Twig.expression.type.object.end"},parameter:{start:"Twig.expression.type.parameter.start",end:"Twig.expression.type.parameter.end"},subexpression:{start:"Twig.expression.type.subexpression.start",end:"Twig.expression.type.subexpression.end"},key:{period:"Twig.expression.type.key.period",brackets:"Twig.expression.type.key.brackets"},filter:"Twig.expression.type.filter",_function:"Twig.expression.type._function",variable:"Twig.expression.type.variable",number:"Twig.expression.type.number",_null:"Twig.expression.type.null",context:"Twig.expression.type.context",test:"Twig.expression.type.test"},u.expression.set={operations:[u.expression.type.filter,u.expression.type.operator.unary,u.expression.type.operator.binary,u.expression.type.array.end,u.expression.type.object.end,u.expression.type.parameter.end,u.expression.type.subexpression.end,u.expression.type.comma,u.expression.type.test],expressions:[u.expression.type._function,u.expression.type.bool,u.expression.type.string,u.expression.type.variable,u.expression.type.number,u.expression.type._null,u.expression.type.context,u.expression.type.parameter.start,u.expression.type.array.start,u.expression.type.object.start,u.expression.type.subexpression.start,u.expression.type.operator.unary]},u.expression.set.operationsExtended=u.expression.set.operations.concat([u.expression.type.key.period,u.expression.type.key.brackets,u.expression.type.slice]),u.expression.fn={compile:{push(e,t,r){r.push(e)},pushBoth(e,t,r){r.push(e),t.push(e)}},parse:{push(e,t){t.push(e)},pushValue(e,t){t.push(e.value)}}},u.expression.definitions=[{type:u.expression.type.test,regex:/^is\s+(not)?\s*([a-zA-Z_]\w*(\s?(?:as|by))?)/,next:u.expression.set.operations.concat([u.expression.type.parameter.start]),compile(e,t,r){e.filter=e.match[2],e.modifier=e.match[1],delete e.match,delete e.value,r.push(e)},parse(t,r,e){const s=r.pop();return l(this,t.params,e).then(e=>{e=u.test(t.filter,s,e);"not"===t.modifier?r.push(!e):r.push(e)})}},{type:u.expression.type.comma,regex:/^,/,next:u.expression.set.expressions.concat([u.expression.type.array.end,u.expression.type.object.end]),compile(e,t,r){let s=t.length-1;var n;for(delete e.match,delete e.value;0<=s;s--){if((n=t.pop()).type===u.expression.type.object.start||n.type===u.expression.type.parameter.start||n.type===u.expression.type.array.start){t.push(n);break}r.push(n)}r.push(e)}},{type:u.expression.type.number,regex:/^-?\d+(\.\d+)?/,next:u.expression.set.operations,compile(e,t,r){e.value=Number(e.value),r.push(e)},parse:u.expression.fn.parse.pushValue},{type:u.expression.type.operator.binary,regex:/(^\?\?|^\?:|^(b-and)|^(b-or)|^(b-xor)|^[+\-~%?]|^[:](?!\d\])|^[!=]==?|^[!<>]=?|^\*\*?|^\/\/?|^(and)[(|\s+]|^(or)[(|\s+]|^(in)[(|\s+]|^(not in)[(|\s+]|^(matches)|^(starts with)|^(ends with)|^\.\.)/,next:u.expression.set.expressions,transform(e,t){switch(e[0]){case"and(":case"or(":case"in(":case"not in(":return t[t.length-1].value=e[2],e[0];default:return""}},compile(e,t,r){delete e.match,e.value=e.value.trim();var s=e["value"],n=u.expression.operator.lookup(s,e);for(u.log.trace("Twig.expression.compile: ","Operator: ",n," from ",s);0<t.length&&(t[t.length-1].type===u.expression.type.operator.unary||t[t.length-1].type===u.expression.type.operator.binary)&&(n.associativity===u.expression.operator.leftToRight&&n.precidence>=t[t.length-1].precidence||n.associativity===u.expression.operator.rightToLeft&&n.precidence>t[t.length-1].precidence);){var o=t.pop();r.push(o)}if(":"===s){if(!t[t.length-1]||"?"!==t[t.length-1].value){s=r.pop();if(s.type===u.expression.type.string||s.type===u.expression.type.variable)e.key=s.value;else if(s.type===u.expression.type.number)e.key=s.value.toString();else{if(!s.expression||s.type!==u.expression.type.parameter.end&&s.type!==u.expression.type.subexpression.end)throw new u.Error("Unexpected value before ':' of "+s.type+" = "+s.value);e.params=s.params}r.push(e)}}else t.push(n)},parse(t,r,s){if(t.key)r.push(t);else{if(t.params)return u.expression.parseAsync.call(this,t.params,s).then(e=>{t.key=e,r.push(t),s.loop||delete t.params});u.expression.operator.parse(t.value,r)}}},{type:u.expression.type.operator.unary,regex:/(^not\s+)/,next:u.expression.set.expressions,compile(e,t,r){delete e.match,e.value=e.value.trim();var s=e["value"],n=u.expression.operator.lookup(s,e);for(u.log.trace("Twig.expression.compile: ","Operator: ",n," from ",s);0<t.length&&(t[t.length-1].type===u.expression.type.operator.unary||t[t.length-1].type===u.expression.type.operator.binary)&&(n.associativity===u.expression.operator.leftToRight&&n.precidence>=t[t.length-1].precidence||n.associativity===u.expression.operator.rightToLeft&&n.precidence>t[t.length-1].precidence);){var o=t.pop();r.push(o)}t.push(n)},parse(e,t){u.expression.operator.parse(e.value,t)}},{type:u.expression.type.string,regex:/^(["'])(?:(?=(\\?))\2[\s\S])*?\1/,next:u.expression.set.operationsExtended,compile(e,t,r){let s=e["value"];delete e.match,s='"'===s.slice(0,1)?s.replace('\\"','"'):s.replace("\\'","'"),e.value=s.slice(1,-1).replace(/\\n/g,"\n").replace(/\\r/g,"\r"),u.log.trace("Twig.expression.compile: ","String value: ",e.value),r.push(e)},parse:u.expression.fn.parse.pushValue},{type:u.expression.type.subexpression.start,regex:/^\(/,next:u.expression.set.expressions.concat([u.expression.type.subexpression.end]),compile(e,t,r){e.value="(",r.push(e),t.push(e)},parse:u.expression.fn.parse.push},{type:u.expression.type.subexpression.end,regex:/^\)/,next:u.expression.set.operationsExtended,validate(e,t){let r=t.length-1,s=!1,n=!1,o=0;for(;!s&&0<=r;){var i=t[r];(s=i.type===u.expression.type.subexpression.start)&&n&&(n=!1,s=!1),i.type===u.expression.type.parameter.start?o++:i.type===u.expression.type.parameter.end?o--:i.type===u.expression.type.subexpression.end&&(n=!0),r--}return s&&0===o},compile(e,t,r){let s;var n=e;for(s=t.pop();0<t.length&&s.type!==u.expression.type.subexpression.start;)r.push(s),s=t.pop();for(var o=[];e.type!==u.expression.type.subexpression.start;)o.unshift(e),e=r.pop();o.unshift(e),void 0===(s=t[t.length-1])||s.type!==u.expression.type._function&&s.type!==u.expression.type.filter&&s.type!==u.expression.type.test&&s.type!==u.expression.type.key.brackets?(n.expression=!0,o.pop(),o.shift(),n.params=o,r.push(n)):(n.expression=!1,s.params=o)},parse(e,t,r){if(e.expression)return u.expression.parseAsync.call(this,e.params,r).then(e=>{t.push(e)});throw new u.Error("Unexpected subexpression end when token is not marked as an expression")}},{type:u.expression.type.parameter.start,regex:/^\(/,next:u.expression.set.expressions.concat([u.expression.type.parameter.end]),validate(e,t){t=t[t.length-1];return t&&!u.expression.reservedWords.includes(t.value.trim())},compile:u.expression.fn.compile.pushBoth,parse:u.expression.fn.parse.push},{type:u.expression.type.parameter.end,regex:/^\)/,next:u.expression.set.operationsExtended,compile(e,t,r){let s;var n=e;for(s=t.pop();0<t.length&&s.type!==u.expression.type.parameter.start;)r.push(s),s=t.pop();for(var o=[];e.type!==u.expression.type.parameter.start;)o.unshift(e),e=r.pop();o.unshift(e),void 0===(e=r[r.length-1])||e.type!==u.expression.type._function&&e.type!==u.expression.type.filter&&e.type!==u.expression.type.test&&e.type!==u.expression.type.key.brackets?(n.expression=!0,o.pop(),o.shift(),n.params=o,r.push(n)):(n.expression=!1,e.params=o)},parse(e,t,r){var s=[];let n=!1;var o;if(e.expression)return u.expression.parseAsync.call(this,e.params,r).then(e=>{t.push(e)});for(;0<t.length;){if((o=t.pop())&&o.type&&o.type===u.expression.type.parameter.start){n=!0;break}s.unshift(o)}if(!n)throw new u.Error("Expected end of parameter set.");t.push(s)}},{type:u.expression.type.slice,regex:/^\[(\d*:\d*)\]/,next:u.expression.set.operationsExtended,compile(e,t,r){var s=e.match[1].split(":"),n=s[0]?parseInt(s[0],10):void 0,s=s[1]?parseInt(s[1],10):void 0;e.value="slice",e.params=[n,s],s||(e.params=[n]),r.push(e)},parse(e,t){var r=t.pop(),s=e["params"];t.push(u.filter.call(this,e.value,r,s))}},{type:u.expression.type.array.start,regex:/^\[/,next:u.expression.set.expressions.concat([u.expression.type.array.end]),compile:u.expression.fn.compile.pushBoth,parse:u.expression.fn.parse.push},{type:u.expression.type.array.end,regex:/^\]/,next:u.expression.set.operationsExtended,compile(e,t,r){let s=t.length-1;for(var n;0<=s&&(n=t.pop()).type!==u.expression.type.array.start;s--)r.push(n);r.push(e)},parse(e,t){var r=[];let s=!1;for(var n;0<t.length;){if((n=t.pop())&&n.type&&n.type===u.expression.type.array.start){s=!0;break}r.unshift(n)}if(!s)throw new u.Error("Expected end of array.");t.push(r)}},{type:u.expression.type.object.start,regex:/^\{/,next:u.expression.set.expressions.concat([u.expression.type.object.end]),compile:u.expression.fn.compile.pushBoth,parse:u.expression.fn.parse.push},{type:u.expression.type.object.end,regex:/^\}/,next:u.expression.set.operationsExtended,compile(e,t,r){let s=t.length-1;for(var n;0<=s&&(!(n=t.pop())||n.type!==u.expression.type.object.start);s--)r.push(n);r.push(e)},parse(e,t){var r={};let s=!1;var n;let o=!1,i=null;for(;0<t.length;){if((n=t.pop())&&n.type&&n.type===u.expression.type.object.start){s=!0;break}if(n&&n.type&&(n.type===u.expression.type.operator.binary||n.type===u.expression.type.operator.unary)&&n.key){if(!o)throw new u.Error("Missing value for key '"+n.key+"' in object definition.");r[n.key]=i,void 0===r._keys&&(r._keys=[]),r._keys.unshift(n.key),i=null,o=!1}else o=!0,i=n}if(!s)throw new u.Error("Unexpected end of object.");t.push(r)}},{type:u.expression.type.filter,regex:/^\|\s?([a-zA-Z_][a-zA-Z0-9_-]*)/,next:u.expression.set.operationsExtended.concat([u.expression.type.parameter.start]),compile(e,t,r){e.value=e.match[1],r.push(e)},parse(t,r,e){const s=r.pop(),n=this;return l(n,t.params,e).then(e=>u.filter.call(n,t.value,s,e)).then(e=>{r.push(e)})}},{type:u.expression.type._function,regex:/^([a-zA-Z_]\w*)\s*\(/,next:u.expression.type.parameter.start,validate(e){return e[1]&&!u.expression.reservedWords.includes(e[1])},transform(){return"("},compile(e,t,r){var s=e.match[1];e.fn=s,delete e.match,delete e.value,r.push(e)},parse(e,t,r){const s=this,n=e["fn"];let o;return l(s,e.params,r).then(e=>{if(u.functions[n])o=u.functions[n].apply(s,e);else{if("function"!=typeof r[n])throw new u.Error(n+" function does not exist and is not defined in the context");o=r[n](...e)}return o}).then(e=>{t.push(e)})}},{type:u.expression.type.variable,regex:/^[a-zA-Z_]\w*/,next:u.expression.set.operationsExtended.concat([u.expression.type.parameter.start]),compile:u.expression.fn.compile.push,validate(e){return!u.expression.reservedWords.includes(e[0])},parse(t,r,e){const s=this;return u.expression.resolveAsync.call(s,e[t.value],e).then(e=>{if(s.template.options.strictVariables&&void 0===e)throw new u.Error('Variable "'+t.value+'" does not exist.');r.push(e)})}},{type:u.expression.type.key.period,regex:/^\.(\w+)/,next:u.expression.set.operationsExtended.concat([u.expression.type.parameter.start]),compile(e,t,r){e.key=e.match[1],delete e.match,delete e.value,r.push(e)},parse(e,t,r,s){const n=this,o=e["key"],i=t.pop();let p;if(i&&!Object.prototype.hasOwnProperty.call(i,o)&&n.template.options.strictVariables)throw 0<Object.keys(i).length?new u.Error('Key "'+o+'" for object with keys "'+Object.keys(i).join(", ")+'" does not exist.'):new u.Error('Key "'+o+'" does not exist as the object is empty.');return l(n,e.params,r).then(e=>{var t;return p=null===i||void 0===i?void 0:(t=function(e){return e.slice(0,1).toUpperCase()+e.slice(1)},"object"==typeof i&&o in i?i[o]:i["get"+t(o)]?i["get"+t(o)]:i["is"+t(o)]?i["is"+t(o)]:void 0),u.expression.resolveAsync.call(n,p,r,e,s,i)}).then(e=>{t.push(e)})}},{type:u.expression.type.key.brackets,regex:/^\[([^\]:]*)\]/,next:u.expression.set.operationsExtended.concat([u.expression.type.parameter.start]),compile(e,t,r){var s=e.match[1];delete e.value,delete e.match,e.stack=u.expression.compile({value:s}).stack,r.push(e)},parse(t,r,s,n){const o=this;let i=null,p,a;return l(o,t.params,s).then(e=>(i=e,u.expression.parseAsync.call(o,t.stack,s))).then(e=>{var t;if((p=r.pop())&&!Object.prototype.hasOwnProperty.call(p,e)&&o.template.options.strictVariables)throw 0<(t=Object.keys(p)).length?new u.Error('Key "'+e+'" for array with keys "'+t.join(", ")+'" does not exist.'):new u.Error('Key "'+e+'" does not exist as the array is empty.');return null===p||void 0===p?null:(a="object"==typeof p&&e in p?p[e]:null,u.expression.resolveAsync.call(o,a,p,i,n))}).then(e=>{r.push(e)})}},{type:u.expression.type._null,regex:/^(null|NULL|none|NONE)/,next:u.expression.set.operations,compile(e,t,r){delete e.match,e.value=null,r.push(e)},parse:u.expression.fn.parse.pushValue},{type:u.expression.type.context,regex:/^_context/,next:u.expression.set.operationsExtended.concat([u.expression.type.parameter.start]),compile:u.expression.fn.compile.push,parse(e,t,r){t.push(r)}},{type:u.expression.type.bool,regex:/^(true|TRUE|false|FALSE)/,next:u.expression.set.operations,compile(e,t,r){e.value="true"===e.match[0].toLowerCase(),delete e.match,r.push(e)},parse:u.expression.fn.parse.pushValue}],u.expression.resolveAsync=function(t,r,e,s,n){const o=this;if("function"!=typeof t)return u.Promise.resolve(t);let i=u.Promise.resolve(e);if(s&&s.type===u.expression.type.parameter.end)i=i.then(()=>s.params&&u.expression.parseAsync.call(o,s.params,r,!0)).then(e=>(s.cleanup=!0,e));return i.then(e=>t.apply(n||r,e||[]))},u.expression.resolve=function(e,t,r,s,n){return u.async.potentiallyAsync(this,!1,function(){return u.expression.resolveAsync.call(this,e,t,r,s,n)})},u.expression.handler={},u.expression.extendType=function(e){u.expression.type[e]="Twig.expression.type."+e},u.expression.extend=function(e){if(!e.type)throw new u.Error("Unable to extend logic definition. No type provided for "+e);u.expression.handler[e.type]=e};0<u.expression.definitions.length;)u.expression.extend(u.expression.definitions.shift());return u.expression.tokenize=function(e){const n=[];let o=0,i=null,p;var t;let r,a,l,c=[];function s(...e){let t=arguments.length-2;for(var r,s=new Array(t);0<t--;)s[t]=e[t];return u.log.trace("Twig.expression.tokenize","Matched a ",p," regular expression of ",s),i&&!i.includes(p)?(c.push(p+" cannot follow a "+n[n.length-1].type+" at template:"+o+" near '"+s[0].slice(0,20)+"...'"),s[0]):(r=u.expression.handler[p]).validate&&!r.validate(s,n)?s[0]:(c=[],n.push({type:p,value:s[0],match:s}),l=!0,i=a,o+=s[0].length,r.transform?r.transform(s,n):"")}for(u.log.debug("Twig.expression.tokenize","Tokenizing expression ",e);0<e.length;){for(p in e=e.trim(),u.expression.handler)if(Object.hasOwnProperty.call(u.expression.handler,p)){if(a=u.expression.handler[p].next,t=u.expression.handler[p].regex,u.log.trace("Checking type ",p," on ",e),l=!1,Array.isArray(t))for(r=t.length;0<r--;)e=e.replace(t[r],s);else e=e.replace(t,s);if(l)break}if(!l)throw 0<c.length?new u.Error(c.join(" OR ")):new u.Error("Unable to parse '"+e+"' at template position"+o)}return u.log.trace("Twig.expression.tokenize","Tokenized to ",n),n},u.expression.compile=function(e){var t,r=e.value,s=u.expression.tokenize(r),n=[],o=[],i=null;for(u.log.trace("Twig.expression.compile: ","Compiling ",r);0<s.length;)t=s.shift(),i=u.expression.handler[t.type],u.log.trace("Twig.expression.compile: ","Compiling ",t),i.compile(t,o,n),u.log.trace("Twig.expression.compile: ","Stack is",o),u.log.trace("Twig.expression.compile: ","Output is",n);for(;0<o.length;)n.push(o.pop());return u.log.trace("Twig.expression.compile: ","Final output is",n),e.stack=n,delete e.value,e},u.expression.parse=function(o,i,s,e){const p=this,a=(Array.isArray(o)||(o=[o]),[]),l=[],c=u.expression.type.operator.binary;return u.async.potentiallyAsync(p,e,()=>u.async.forEach(o,(e,t)=>{var r=null;let s=null,n;if(!e.cleanup)return o.length>t+1&&(s=o[t+1]),(r=u.expression.handler[e.type]).parse&&(n=r.parse.call(p,e,a,i,s)),e.type===c&&i.loop&&l.push(e),n}).then(()=>{let e=l.length;for(var t,r=null;0<e--;)(r=l[e]).params&&r.key&&delete r.key;return s&&(t=a.splice(0),a.push(t)),a.pop()}))},u}},47:function(e,t){e.exports=function(p){"use strict";p.expression.operator={leftToRight:"leftToRight",rightToLeft:"rightToLeft"};function a(e,t){if(null==t)return null;if(void 0!==t.indexOf)return(e===t||""!==e)&&t.includes(e);let r;for(r in t)if(Object.hasOwnProperty.call(t,r)&&t[r]===e)return!0;return!1}return p.expression.operator.lookup=function(e,t){switch(e){case"..":t.precidence=20,t.associativity=p.expression.operator.leftToRight;break;case",":t.precidence=18,t.associativity=p.expression.operator.leftToRight;break;case"?:":case"?":case":":t.precidence=16,t.associativity=p.expression.operator.rightToLeft;break;case"??":t.precidence=15,t.associativity=p.expression.operator.rightToLeft;break;case"or":t.precidence=14,t.associativity=p.expression.operator.leftToRight;break;case"and":t.precidence=13,t.associativity=p.expression.operator.leftToRight;break;case"b-or":t.precidence=12,t.associativity=p.expression.operator.leftToRight;break;case"b-xor":t.precidence=11,t.associativity=p.expression.operator.leftToRight;break;case"b-and":t.precidence=10,t.associativity=p.expression.operator.leftToRight;break;case"==":case"!=":t.precidence=9,t.associativity=p.expression.operator.leftToRight;break;case"<":case"<=":case">":case">=":case"not in":case"in":t.precidence=8,t.associativity=p.expression.operator.leftToRight;break;case"~":case"+":case"-":t.precidence=6,t.associativity=p.expression.operator.leftToRight;break;case"//":case"**":case"*":case"/":case"%":t.precidence=5,t.associativity=p.expression.operator.leftToRight;break;case"not":t.precidence=3,t.associativity=p.expression.operator.rightToLeft;break;case"matches":case"starts with":case"ends with":t.precidence=8,t.associativity=p.expression.operator.leftToRight;break;default:throw new p.Error("Failed to lookup operator: "+e+" is an unknown operator.")}return t.operator=e,t},p.expression.operator.parse=function(e,t){p.log.trace("Twig.expression.operator.parse: ","Handling ",e);let r,s,n;var o,i;switch("?"===e&&(n=t.pop()),s=t.pop(),"not"!==e&&(r=t.pop()),"in"!==e&&"not in"!==e&&"??"!==e&&(r&&Array.isArray(r)&&(r=r.length),"?"!==e)&&s&&Array.isArray(s)&&(s=s.length),"matches"===e&&s&&"string"==typeof s&&(o=(i=s.match(/^\/(.*)\/([gims]?)$/))[1],i=i[2],s=new RegExp(o,i)),e){case":":break;case"??":void 0===r&&(r=s,s=n,n=void 0),void 0!==r&&null!==r?t.push(r):t.push(s);break;case"?:":p.lib.boolval(r)?t.push(r):t.push(s);break;case"?":void 0===r&&(r=s,s=n,n=void 0),p.lib.boolval(r)?t.push(s):t.push(n);break;case"+":s=parseFloat(s),r=parseFloat(r),t.push(r+s);break;case"-":s=parseFloat(s),r=parseFloat(r),t.push(r-s);break;case"*":s=parseFloat(s),r=parseFloat(r),t.push(r*s);break;case"/":s=parseFloat(s),r=parseFloat(r),t.push(r/s);break;case"//":s=parseFloat(s),r=parseFloat(r),t.push(Math.floor(r/s));break;case"%":s=parseFloat(s),r=parseFloat(r),t.push(r%s);break;case"~":t.push((void 0!==r&&null!==r?r.toString():"")+(void 0!==s&&null!==s?s.toString():""));break;case"not":case"!":t.push(!p.lib.boolval(s));break;case"<":t.push(r<s);break;case"<=":t.push(r<=s);break;case">":t.push(r>s);break;case">=":t.push(r>=s);break;case"===":t.push(r===s);break;case"==":t.push(r==s);break;case"!==":t.push(r!==s);break;case"!=":t.push(r!=s);break;case"or":t.push(p.lib.boolval(r)||p.lib.boolval(s));break;case"b-or":t.push(r|s);break;case"b-xor":t.push(r^s);break;case"and":t.push(p.lib.boolval(r)&&p.lib.boolval(s));break;case"b-and":t.push(r&s);break;case"**":t.push(r**s);break;case"not in":t.push(!a(r,s));break;case"in":t.push(a(r,s));break;case"matches":t.push(s.test(r));break;case"starts with":t.push("string"==typeof r&&0===r.indexOf(s));break;case"ends with":t.push("string"==typeof r&&r.includes(s,r.length-s.length));break;case"..":t.push(p.functions.range(r,s));break;default:throw new p.Error("Failed to parse operator: "+e+" is an unknown operator.")}},p}},48:function(e,t){e.exports=function(u){function o(e,t){var r=Object.prototype.toString.call(t).slice(8,-1);return null!=t&&r===e}return u.filters={upper(e){return"string"!=typeof e?e:e.toUpperCase()},lower(e){return"string"!=typeof e?e:e.toLowerCase()},capitalize(e){return"string"!=typeof e?e:e.slice(0,1).toUpperCase()+e.toLowerCase().slice(1)},title(e){return"string"!=typeof e?e:e.toLowerCase().replace(/(^|\s)([a-z])/g,(e,t,r)=>t+r.toUpperCase())},length(e){return u.lib.is("Array",e)||"string"==typeof e?e.length:u.lib.is("Object",e)?(void 0===e._keys?Object.keys(e):e._keys).length:0},reverse(e){var t;return o("Array",e)?e.reverse():o("String",e)?e.split("").reverse().join(""):o("Object",e)?(t=e._keys||Object.keys(e).reverse(),e._keys=t,e):void 0},sort(n){var e;return o("Array",n)?n.sort():o("Object",n)?(delete n._keys,e=Object.keys(n).sort((e,t)=>{var r;let s;return n[e]>n[t]==!(n[e]<=n[t])?n[e]>n[t]?1:n[e]<n[t]?-1:0:isNaN(r=parseFloat(n[e]))||isNaN(s=parseFloat(n[t]))?"string"==typeof n[e]?n[e]>n[t].toString()?1:n[e]<n[t].toString()?-1:0:"string"==typeof n[t]?n[e].toString()>n[t]?1:n[e].toString()<n[t]?-1:0:null:r>s?1:r<s?-1:0}),n._keys=e,n):void 0},keys(t){if(null!=t){var e=t._keys||Object.keys(t);const r=[];return e.forEach(e=>{"_keys"!==e&&Object.hasOwnProperty.call(t,e)&&r.push(e)}),r}},url_encode(t){if(null!=t){if(u.lib.is("Object",t)){const o=function(r,s){const n=[];return(r._keys||Object.keys(r)).forEach(e=>{var t;Object.prototype.hasOwnProperty.call(r,e)&&(t=s?s+"["+e+"]":e,e=r[e],n.push(u.lib.is("Object",e)||Array.isArray(e)?o(e,t):encodeURIComponent(t)+"="+encodeURIComponent(e)))}),n.join("&amp;")};return o(t)}let e=encodeURIComponent(t);return e=e.replace("'","%27")}},join(r,s){if(null!=r){let e="",t=[];return s&&s[0]&&(e=s[0]),o("Array",r)?t=r:(r._keys||Object.keys(r)).forEach(e=>{"_keys"!==e&&Object.hasOwnProperty.call(r,e)&&t.push(r[e])}),t.join(e)}},default(e,t){if(void 0!==t&&1<t.length)throw new u.Error("default filter expects one argument");return null==e||""===e?void 0===t?"":t[0]:e},json_encode(t){if(null==t)return"null";if("object"==typeof t&&o("Array",t)){const r=[];return t.forEach(e=>{r.push(u.filters.json_encode(e))}),"["+r.join(",")+"]"}if("object"==typeof t&&o("Date",t))return'"'+t.toISOString()+'"';if("object"!=typeof t)return JSON.stringify(t);{var e=t._keys||Object.keys(t);const s=[];return e.forEach(e=>{s.push(JSON.stringify(e)+":"+u.filters.json_encode(t[e]))}),"{"+s.join(",")+"}"}},merge(t,e){let r=[],s=0,n=[];if(o("Array",t)?e.forEach(e=>{o("Array",e)||(r={})}):r={},o("Array",r)||(r._keys=[]),o("Array",t)?t.forEach(e=>{r._keys&&r._keys.push(s),r[s]=e,s++}):(n=t._keys||Object.keys(t)).forEach(e=>{r[e]=t[e],r._keys.push(e);e=parseInt(e,10);!isNaN(e)&&e>=s&&(s=e+1)}),e.forEach(t=>{o("Array",t)?t.forEach(e=>{r._keys&&r._keys.push(s),r[s]=e,s++}):(n=t._keys||Object.keys(t)).forEach(e=>{r[e]||r._keys.push(e),r[e]=t[e];e=parseInt(e,10);!isNaN(e)&&e>=s&&(s=e+1)})}),0===e.length)throw new u.Error("Filter merge expects at least one parameter");return r},date(e,t){e=u.functions.date(e),t=t&&Boolean(t.length)?t[0]:"F j, Y H:i";return u.lib.date(t.replace(/\\\\/g,"\\"),e)},date_modify(t,r){if(null!=t){if(void 0===r||1!==r.length)throw new u.Error("date_modify filter expects 1 argument");r=r[0];let e;return u.lib.is("Date",t)&&(e=u.lib.strtotime(r,t.getTime()/1e3)),u.lib.is("String",t)&&(e=u.lib.strtotime(r,u.lib.strtotime(t))),u.lib.is("Number",t)&&(e=u.lib.strtotime(r,t)),new Date(1e3*e)}},replace(t,r){if(null!=t){var s=r[0];let e;for(e in s)Object.hasOwnProperty.call(s,e)&&"_keys"!==e&&(t=u.lib.replaceAll(t,e,s[e]));return t}},format(e,t){if(null!=e)return u.lib.vsprintf(e,t)},striptags(e,t){if(null!=e)return u.lib.stripTags(e,t)},escape(r,t){if(null!=r&&""!==r){let e="html";if("html"===(e=t&&Boolean(t.length)&&!0!==t[0]?t[0]:e))return t=r.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),new u.Markup(t,"html");if("js"===e){var s,n,o,i=r.toString();let t="";for(let e=0;e<i.length;e++)i[e].match(/^[a-zA-Z0-9,._]$/)?t+=i[e]:(s=i.charAt(e),n=i.charCodeAt(e),o={"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},t+=o[s]||u.lib.sprintf("\\u%04s",n.toString(16).toUpperCase()));return new u.Markup(t,"js")}if("css"===e){var p,a=r.toString();let t="";for(let e=0;e<a.length;e++)a[e].match(/^[a-zA-Z0-9]$/)?t+=a[e]:(p=a.charCodeAt(e),t+="\\"+p.toString(16).toUpperCase()+" ");return new u.Markup(t,"css")}if("url"===e)return t=u.filters.url_encode(r),new u.Markup(t,"url");if("html_attr"!==e)throw new u.Error("escape strategy unsupported");{var l,c=r.toString();let t="";for(let e=0;e<c.length;e++)c[e].match(/^[a-zA-Z0-9,.\-_]$/)?t+=c[e]:c[e].match(/^[&<>"]$/)?t+=c[e].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):(l=c.charCodeAt(e),t+=l<=31&&9!==l&&10!==l&&13!==l?"&#xFFFD;":l<128?u.lib.sprintf("&#x%02s;",l.toString(16).toUpperCase()):u.lib.sprintf("&#x%04s;",l.toString(16).toUpperCase()));return new u.Markup(t,"html_attr")}}},e(e,t){return u.filters.escape(e,t)},nl2br(e){var t,r;if(null!=e&&""!==e)return r="<br />"+(t="BACKSLASH_n_replace"),e=u.filters.escape(e).replace(/\r\n/g,r).replace(/\r/g,r).replace(/\n/g,r),e=u.lib.replaceAll(e,t,"\n"),new u.Markup(e)},number_format(e,t){var r=t&&t[0]?t[0]:void 0,s=t&&void 0!==t[1]?t[1]:".",t=t&&void 0!==t[2]?t[2]:",",e=String(e).replace(/[^0-9+\-Ee.]/g,""),e=isFinite(Number(e))?Number(e):0,r=isFinite(Number(r))?Math.abs(r):0,n="";return 3<(n=(r?function(e,t){t=10**t;return String(Math.round(e*t)/t)}(e,r):String(Math.round(e))).split("."))[0].length&&(n[0]=n[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,t)),(n[1]||"").length<r&&(n[1]=n[1]||"",n[1]+=new Array(r-n[1].length+1).join("0")),n.join(s)},trim(e,s){if(null!=e){let t=String(e),r;r=s&&s[0]?String(s[0]):" \n\r\t\f\v            ​\u2028\u2029　";for(let e=0;e<t.length;e++)if(!r.includes(t.charAt(e))){t=t.slice(Math.max(0,e));break}for(let e=t.length-1;0<=e;e--)if(!r.includes(t.charAt(e))){t=t.slice(0,Math.max(0,e+1));break}return r.includes(t.charAt(0))?"":t}},truncate(e,t){let r=30,s=!1,n="...";if(e=String(e),t&&(t[0]&&(r=t[0]),t[1]&&(s=t[1]),t[2])&&(n=t[2]),e.length>r){if(s&&-1===(r=e.indexOf(" ",r)))return e;e=e.slice(0,r)+n}return e},slice(t,e){if(null!=t){if(void 0===e||0===e.length)throw new u.Error("slice filter expects at least 1 argument");var r=e[0]||0,s=1<e.length?e[1]:t.length,n=0<=r?r:Math.max(t.length+r,0);if(u.lib.is("Array",t)){var o=[];for(let e=n;e<n+s&&e<t.length;e++)o.push(t[e]);return o}if(u.lib.is("String",t))return t.slice(n,n+s);throw new u.Error("slice filter expects value to be an array or string")}},abs(e){if(null!=e)return Math.abs(e)},first(e){if(o("Array",e))return e[0];if(o("Object",e)){if("_keys"in e)return e[e._keys[0]]}else if("string"==typeof e)return e.slice(0,1)},split(e,t){if(null!=e){if(void 0===t||0===t.length||2<t.length)throw new u.Error("split filter expects 1 or 2 argument");if(u.lib.is("String",e)){var r=t[0],s=t[1],n=e.split(r);if(void 0===s)return n;if(s<0)return e.split(r,n.length+s);var o=[];if(""===r)for(;0<n.length;){let t="";for(let e=0;e<s&&0<n.length;e++)t+=n.shift();o.push(t)}else{for(let e=0;e<s-1&&0<n.length;e++)o.push(n.shift());0<n.length&&o.push(n.join(r))}return o}throw new u.Error("split filter expects value to be a string")}},last(t){if(u.lib.is("Object",t)){let e;return t[(e=void 0===t._keys?Object.keys(t):t._keys)[e.length-1]]}return u.lib.is("Number",t)?t.toString().slice(-1):t[t.length-1]},raw(e){return new u.Markup(e||"")},batch(e,t){var r,s=t.shift(),n=t.shift();let o;if(!u.lib.is("Array",e))throw new u.Error("batch filter expects items to be an array");if(!u.lib.is("Number",s))throw new u.Error("batch filter expects size to be a number");s=Math.ceil(s),t=u.lib.chunkArray(e,s);if(n&&e.length%s!=0){for(r=t.pop(),o=s-r.length;o--;)r.push(n);t.push(r)}return t},round(e,t){var r=0<(t=t||[]).length?t[0]:0,t=1<t.length?t[1]:"common";if(e=parseFloat(e),r&&!u.lib.is("Number",r))throw new u.Error("round filter expects precision to be a number");if("common"===t)return u.lib.round(e,r);if(u.lib.is("Function",Math[t]))return Math[t](e*10**r)/10**r;throw new u.Error("round filter expects method to be 'floor', 'ceil', or 'common'")},spaceless(e){return e.replace(/>\s+</g,"><").trim()}},u.filter=function(e,t,r){if(u.filters[e])return u.filters[e].call(this,t,r);throw new u.Error("Unable to find filter "+e)},u.filter.extend=function(e,t){u.filters[e]=t},u}},49:function(l,e,t){l.exports=function(a){return a.functions={range(e,t,r){var s=[];let n,o;var i=r||1;let p=!1;if(o=isNaN(e)||isNaN(t)?isNaN(e)&&isNaN(t)?(p=!0,n=e.charCodeAt(0),t.charCodeAt(0)):(n=isNaN(e)?0:e,isNaN(t)?0:t):(n=parseInt(e,10),parseInt(t,10)),!(n>o))for(;n<=o;)s.push(p?String.fromCharCode(n):n),n+=i;else for(;n>=o;)s.push(p?String.fromCharCode(n):n),n-=i;return s},cycle(e,t){return e[t%e.length]},dump(...e){e=[...e];const r="\n",s="  ";let n=0,o="";const i=function(e){let t="";for(;0<e;)e--,t+=s;return t},p=function(e){o+=i(n),"object"==typeof e?t(e):"function"==typeof e?o+="function()"+r:"string"==typeof e?o+="string("+e.length+') "'+e+'"'+r:"number"==typeof e?o+="number("+e+")"+r:"boolean"==typeof e&&(o+="bool("+e+")"+r)},t=function(e){let t;if(null===e)o+="NULL"+r;else if(void 0===e)o+="undefined"+r;else if("object"==typeof e){for(t in o+=i(n)+typeof e,n++,o+="("+function(e){let t=0,r;for(r in e)Object.hasOwnProperty.call(e,r)&&t++;return t}(e)+") {"+r,e)Object.hasOwnProperty.call(e,t)&&(o+=i(n)+"["+t+"]=> "+r,p(e[t]));n--,o+=i(n)+"}"+r}else p(e)};return 0===e.length&&e.push(this.context),e.forEach(e=>{t(e)}),o},date(e){let t;if(null==e||""===e)t=new Date;else if(a.lib.is("Date",e))t=e;else if(a.lib.is("String",e))t=e.match(/^\d+$/)?new Date(1e3*e):new Date(1e3*a.lib.strtotime(e));else{if(!a.lib.is("Number",e))throw new a.Error("Unable to parse date "+e);t=new Date(1e3*e)}return t},block(e){e=this.getBlock(e);if(void 0!==e)return e.render(this,this.context)},parent(){return this.getBlock(this.getNestingStackToken(a.logic.type.block).blockName,!0).render(this,this.context)},attribute(e,t,r){return a.lib.is("Object",e)&&Object.hasOwnProperty.call(e,t)?"function"==typeof e[t]?e[t].apply(void 0,r):e[t]:e&&e[t]||void 0},max(e,...t){return a.lib.is("Object",e)?(delete e._keys,a.lib.max(e)):Reflect.apply(a.lib.max,null,[e,...t])},min(e,...t){return a.lib.is("Object",e)?(delete e._keys,a.lib.min(e)):Reflect.apply(a.lib.min,null,[e,...t])},template_from_string(e){return a.Templates.parsers.twig({options:this.template.options,data:e=void 0===e?"":e})},random(e){const s=2147483648;function t(e){var t=Math.floor(Math.random()*s),r=Math.min.call(null,0,e),e=Math.max.call(null,0,e);return r+Math.floor((e-r+1)*t/s)}return a.lib.is("Number",e)?t(e):a.lib.is("String",e)?e.charAt(t(e.length-1)):a.lib.is("Array",e)?e[t(e.length-1)]:a.lib.is("Object",e)?e[(e=Object.keys(e))[t(e.length-1)]]:t(s-1)},source(e,t){var r=this.template.options["namespaces"];let s,n=!1;var o=void 0!==l.exports&&"undefined"==typeof window;let i,p=e;r&&"object"==typeof r&&(p=a.path.expandNamespace(r,p)),i=o?"fs":"ajax";r={id:e,path:p,method:i,parser:"source",async:!1,fetchTemplateSource:!0};void 0===t&&(t=!1);try{void 0===(s=a.Templates.loadRemote(e,r))||null===s?s="":n=!0}catch(e){a.log.debug("Twig.functions.source: ","Problem loading template  ",e)}return n||t?s:'Template "{name}" is not defined.'.replace("{name}",e)}},a._function=function(e,t,r){if(a.functions[e])return a.functions[e](t,r);throw new a.Error("Unable to find function "+e)},a._function.extend=function(e,t){a.functions[e]=t},a}},50:function(e,t,r){e.exports=function(e){return e.lib={},e.lib.sprintf=r(37),e.lib.vsprintf=r(51),e.lib.round=r(52),e.lib.max=r(54),e.lib.min=r(55),e.lib.stripTags=r(56),e.lib.strtotime=r(58),e.lib.date=r(59),e.lib.boolval=r(60),e.lib.is=function(e,t){if(null==t)return!1;switch(e){case"Array":return Array.isArray(t);case"Date":return t instanceof Date;case"String":return"string"==typeof t||t instanceof String;case"Number":return"number"==typeof t||t instanceof Number;case"Function":return"function"==typeof t;case"Object":return t instanceof Object;default:return!1}},e.lib.replaceAll=function(e,t,r){e="string"==typeof e?e:e.toString(),t=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return e.replace(new RegExp(t,"g"),r)},e.lib.chunkArray=function(e,t){var r=[];let s=0;var n=e.length;if(t<1||!Array.isArray(e))return[];for(;s<n;)r.push(e.slice(s,s+=t));return r},e}},61:function(e,t){e.exports=function(l){"use strict";l.Templates.registerLoader("ajax",function(t,r,s,n){let o;const i=r["precompiled"],p=this.parsers[r.parser]||this.parser.twig;if("undefined"==typeof XMLHttpRequest)throw new l.Error('Unsupported platform: Unable to do ajax requests because there is no "XMLHTTPRequest" implementation');const a=new XMLHttpRequest;return a.onreadystatechange=function(){let e=null;4===a.readyState&&(200===a.status||window.cordova&&0===a.status?(l.log.debug("Got template ",a.responseText),e=!0===i?JSON.parse(a.responseText):a.responseText,r.url=t,r.data=e,o=p.call(this,r),"function"==typeof s&&s(o)):"function"==typeof n&&n(a))},a.open("GET",t,Boolean(r.async)),a.overrideMimeType("text/plain"),a.send(),!!r.async||o})}},62:function(e,t,r){e.exports=function(c){"use strict";let u,t;try{u=r(35),t=r(33)}catch(e){console.warn("Missing fs and path modules. "+e)}c.Templates.registerLoader("fs",function(r,s,n,o){let i;var e;const p=s["precompiled"],a=this.parsers[s.parser]||this.parser.twig;if(!u||!t)throw new c.Error('Unsupported platform: Unable to load from file because there is no "fs" or "path" implementation');function l(e,t){e?"function"==typeof o&&o(e):(!0===p&&(t=JSON.parse(t)),s.data=t,s.path=s.path||r,i=a.call(this,s),"function"==typeof n&&n(i))}if(s.path=s.path||r,s.async)return u.stat(s.path,(e,t)=>{e||!t.isFile()?"function"==typeof o&&o(new c.Error("Unable to find template file "+s.path)):u.readFile(s.path,"utf8",l)}),!0;try{if(!u.statSync(s.path).isFile())throw new c.Error("Unable to find template file "+s.path)}catch(e){throw new c.Error("Unable to find template file "+s.path+". "+e)}return e=u.readFileSync(s.path,"utf8"),l(void 0,e),i})}},63:function(e,t){e.exports=function(h){"use strict";for(h.logic={},h.logic.type={if_:"Twig.logic.type.if",endif:"Twig.logic.type.endif",for_:"Twig.logic.type.for",endfor:"Twig.logic.type.endfor",else_:"Twig.logic.type.else",elseif:"Twig.logic.type.elseif",set:"Twig.logic.type.set",setcapture:"Twig.logic.type.setcapture",endset:"Twig.logic.type.endset",filter:"Twig.logic.type.filter",endfilter:"Twig.logic.type.endfilter",apply:"Twig.logic.type.apply",endapply:"Twig.logic.type.endapply",do:"Twig.logic.type.do",shortblock:"Twig.logic.type.shortblock",block:"Twig.logic.type.block",endblock:"Twig.logic.type.endblock",extends_:"Twig.logic.type.extends",use:"Twig.logic.type.use",include:"Twig.logic.type.include",spaceless:"Twig.logic.type.spaceless",endspaceless:"Twig.logic.type.endspaceless",macro:"Twig.logic.type.macro",endmacro:"Twig.logic.type.endmacro",import_:"Twig.logic.type.import",from:"Twig.logic.type.from",embed:"Twig.logic.type.embed",endembed:"Twig.logic.type.endembed",with:"Twig.logic.type.with",endwith:"Twig.logic.type.endwith",deprecated:"Twig.logic.type.deprecated"},h.logic.definitions=[{type:h.logic.type.if_,regex:/^if\s?([\s\S]+)$/,next:[h.logic.type.else_,h.logic.type.elseif,h.logic.type.endif],open:!0,compile(e){var t=e.match[1];return e.stack=h.expression.compile.call(this,{type:h.expression.type.expression,value:t}).stack,delete e.match,e},parse(t,r,s){const n=this;return h.expression.parseAsync.call(n,t.stack,r).then(e=>(s=!0,h.lib.boolval(e)?(s=!1,n.parseAsync(t.output,r)):"")).then(e=>({chain:s,output:e}))}},{type:h.logic.type.elseif,regex:/^elseif\s?([^\s].*)$/,next:[h.logic.type.else_,h.logic.type.elseif,h.logic.type.endif],open:!1,compile(e){var t=e.match[1];return e.stack=h.expression.compile.call(this,{type:h.expression.type.expression,value:t}).stack,delete e.match,e},parse(t,r,s){const n=this;return h.expression.parseAsync.call(n,t.stack,r).then(e=>s&&h.lib.boolval(e)?(s=!1,n.parseAsync(t.output,r)):"").then(e=>({chain:s,output:e}))}},{type:h.logic.type.else_,regex:/^else$/,next:[h.logic.type.endif,h.logic.type.endfor],open:!1,parse(e,t,r){let s=h.Promise.resolve("");return(s=r?this.parseAsync(e.output,t):s).then(e=>({chain:r,output:e}))}},{type:h.logic.type.endif,regex:/^endif$/,next:[],open:!1},{type:h.logic.type.for_,regex:/^for\s+([a-zA-Z0-9_,\s]+)\s+in\s+([\S\s]+?)(?:\s+if\s+([^\s].*))?$/,next:[h.logic.type.else_,h.logic.type.endfor],open:!0,compile(e){var t=e.match[1],r=e.match[2],s=e.match[3],n=null;if(e.keyVar=null,e.valueVar=null,t.includes(",")){if(2!==(n=t.split(",")).length)throw new h.Error("Invalid expression in for loop: "+t);e.keyVar=n[0].trim(),e.valueVar=n[1].trim()}else e.valueVar=t.trim();return e.expression=h.expression.compile.call(this,{type:h.expression.type.expression,value:r}).stack,s&&(e.conditional=h.expression.compile.call(this,{type:h.expression.type.expression,value:s}).stack),delete e.match,e},parse(s,n,e){const o=[];let i,p=0,r;function a(e,t){const r={...n};return r[s.valueVar]=t,s.keyVar&&(r[s.keyVar]=e),r.loop=u(p,i),(void 0===c?h.Promise.resolve(!0):h.expression.parseAsync.call(l,c,r)).then(e=>{if(e)return l.parseAsync(s.output,r).then(e=>{o.push(e),p+=1})}).then(()=>{delete r.loop,delete r[s.valueVar],delete r[s.keyVar],h.merge(n,r,!0)})}const l=this,c=s["conditional"],u=function(e,t){var r=void 0!==c;return{index:e+1,index0:e,revindex:r?void 0:t-e,revindex0:r?void 0:t-e-1,first:0===e,last:r?void 0:e===t-1,length:r?void 0:t,parent:n}};return h.expression.parseAsync.call(l,s.expression,n).then(t=>Array.isArray(t)?(i=t.length,h.async.forEach(t,e=>{var t=p;return a(t,e)})):h.lib.is("Object",t)?(r=void 0===t._keys?Object.keys(t):t._keys,i=r.length,h.async.forEach(r,e=>{if("_keys"!==e)return a(e,t[e])})):void 0).then(()=>({chain:0===o.length,context:n,output:h.output.call(l.template,o)}))}},{type:h.logic.type.endfor,regex:/^endfor$/,next:[],open:!1},{type:h.logic.type.set,regex:/^set\s+([a-zA-Z0-9_,\s]+)\s*=\s*([\s\S]+)$/,next:[],open:!0,compile(e){var t=e.match[1].trim(),r=e.match[2],r=h.expression.compile.call(this,{type:h.expression.type.expression,value:r}).stack;return e.key=t,e.expression=r,delete e.match,e},parse(e,t,r){const s=e["key"];return h.expression.parseAsync.call(this,e.expression,t).then(e=>(e===t&&(e={...e}),t[s]=e,{chain:r,context:t}))}},{type:h.logic.type.setcapture,regex:/^set\s+([a-zA-Z0-9_,\s]+)$/,next:[h.logic.type.endset],open:!0,compile(e){var t=e.match[1].trim();return e.key=t,delete e.match,e},parse(e,t,r){const s=this,n=e["key"];return s.parseAsync(e.output,t).then(e=>(s.context[n]=e,t[n]=e,{chain:r,context:t}))}},{type:h.logic.type.endset,regex:/^endset$/,next:[],open:!1},{type:h.logic.type.filter,regex:/^filter\s+(.+)$/,next:[h.logic.type.endfilter],open:!0,compile(e){var t="|"+e.match[1].trim();return e.stack=h.expression.compile.call(this,{type:h.expression.type.expression,value:t}).stack,delete e.match,e},parse(t,r,s){const n=this;return n.parseAsync(t.output,r).then(e=>{e=[{type:h.expression.type.string,value:e}].concat(t.stack);return h.expression.parseAsync.call(n,e,r)}).then(e=>({chain:s,output:e}))}},{type:h.logic.type.endfilter,regex:/^endfilter$/,next:[],open:!1},{type:h.logic.type.apply,regex:/^apply\s+(.+)$/,next:[h.logic.type.endapply],open:!0,compile(e){var t="|"+e.match[1].trim();return e.stack=h.expression.compile.call(this,{type:h.expression.type.expression,value:t}).stack,delete e.match,e},parse(t,r,s){const n=this;return n.parseAsync(t.output,r).then(e=>{e=[{type:h.expression.type.string,value:e}].concat(t.stack);return h.expression.parseAsync.call(n,e,r)}).then(e=>({chain:s,output:e}))}},{type:h.logic.type.endapply,regex:/^endapply$/,next:[],open:!1},{type:h.logic.type.do,regex:/^do\s+([\S\s]+)$/,next:[],open:!0,compile(e){var t=e.match[1],t=h.expression.compile.call(this,{type:h.expression.type.expression,value:t}).stack;return e.expression=t,delete e.match,e},parse(e,t,r){return h.expression.parseAsync.call(this,e.expression,t).then(()=>({chain:r,context:t}))}},{type:h.logic.type.block,regex:/^block\s+(\w+)$/,next:[h.logic.type.endblock],open:!0,compile(e){return e.blockName=e.match[1].trim(),delete e.match,e},parse(e,t,r){var s=this;let n=h.Promise.resolve();return s.template.blocks.defined[e.blockName]=new h.Block(s.template,e),(n=null===s.template.parentTemplate||s.template.parentTemplate instanceof h.Template?s.getBlock(e.blockName).render(s,t):n).then(e=>({chain:r,output:e}))}},{type:h.logic.type.shortblock,regex:/^block\s+(\w+)\s+(.+)$/,next:[],open:!0,compile(e){return e.expression=e.match[2].trim(),e.output=h.expression.compile({type:h.expression.type.expression,value:e.expression}).stack,h.logic.handler[h.logic.type.block].compile.apply(this,[e])},parse(...e){return h.logic.handler[h.logic.type.block].parse.apply(this,e)}},{type:h.logic.type.endblock,regex:/^endblock(?:\s+(\w+))?$/,next:[],open:!1},{type:h.logic.type.extends_,regex:/^extends\s+(.+)$/,next:[],open:!0,compile(e){var t=e.match[1].trim();return delete e.match,e.stack=h.expression.compile.call(this,{type:h.expression.type.expression,value:t}).stack,e},parse(e,t,r){const s=this;return h.expression.parseAsync.call(s,e.stack,t).then(e=>{var t;return Array.isArray(e)?null!==(t=e.reverse().reduce((t,e)=>{try{return{render:s.template.importFile(e),fileName:e}}catch(e){return t}},{render:null,fileName:null})).fileName&&(s.template.parentTemplate=t.fileName):s.template.parentTemplate=e,{chain:r,output:""}})}},{type:h.logic.type.use,regex:/^use\s+(.+)$/,next:[],open:!0,compile(e){var t=e.match[1].trim();return delete e.match,e.stack=h.expression.compile.call(this,{type:h.expression.type.expression,value:t}).stack,e},parse(e,t,r){const s=this;return h.expression.parseAsync.call(s,e.stack,t).then(e=>{e=s.template.importFile(e);const t=new h.ParseState(e);return t.parseAsync(e.tokens).then(()=>{s.template.blocks.imported={...s.template.blocks.imported,...t.getBlocks()}})}).then(()=>({chain:r,output:""}))}},{type:h.logic.type.include,regex:/^include\s+(.+?)(?:\s|$)(ignore missing(?:\s|$))?(?:with\s+([\S\s]+?))?(?:\s|$)(only)?$/,next:[],open:!0,compile(e){var t=e["match"],r=t[1].trim(),s=void 0!==t[2],n=t[3],t=void 0!==t[4]&&t[4].length;return delete e.match,e.only=t,e.ignoreMissing=s,e.stack=h.expression.compile.call(this,{type:h.expression.type.expression,value:r}).stack,void 0!==n&&(e.withStack=h.expression.compile.call(this,{type:h.expression.type.expression,value:n.trim()}).stack),e},parse(e,t,r){let s=e.only?{}:{...t};const n=e["ignoreMissing"],o=this;let i=null;const p={chain:r,output:""};return(i=void 0===e.withStack?h.Promise.resolve():h.expression.parseAsync.call(o,e.withStack,t).then(e=>{s={...s,...e}})).then(()=>h.expression.parseAsync.call(o,e.stack,t)).then(e=>{let t;e=(t=Array.isArray(e)?e:[e]).reduce((e,t)=>{if(null===e.render){if(t instanceof h.Template)return{render:t.renderAsync(s,{isInclude:!0}),lastError:null};try{return{render:o.template.importFile(t).renderAsync(s,{isInclude:!0}),lastError:null}}catch(e){return{render:null,lastError:e}}}return e},{render:null,lastError:null});if(null!==e.render)return e.render;if(null===e.render&&n)return"";throw e.lastError}).then(e=>(""!==e&&(p.output=e),p))}},{type:h.logic.type.spaceless,regex:/^spaceless$/,next:[h.logic.type.endspaceless],open:!0,parse(e,t,r){return this.parseAsync(e.output,t).then(e=>{e=e.replace(/>\s+</g,"><").trim(),e=new h.Markup(e);return{chain:r,output:e}})}},{type:h.logic.type.endspaceless,regex:/^endspaceless$/,next:[],open:!1},{type:h.logic.type.macro,regex:/^macro\s+(\w+)\s*\(\s*((?:\w+(?:\s*=\s*([\s\S]+))?(?:,\s*)?)*)\s*\)$/,next:[h.logic.type.endmacro],open:!0,compile(e){var t=e.match[1],r=e.match[2].split(/\s*,\s*/),s=r.map(e=>e.split(/\s*=\s*/)[0]),n=s.length;if(1<n){var o={};for(let e=0;e<n;e++){var i=s[e];if(o[i])throw new h.Error("Duplicate arguments for parameter: "+i);o[i]=1}}return e.macroName=t,e.parameters=s,e.defaults=r.reduce(function(e,t){var t=t.split(/\s*=\s*/),r=t[0],t=t[1];return e[r]=t?h.expression.compile.call(this,{type:h.expression.type.expression,value:t}).stack:void 0,e},{}),delete e.match,e},parse(n,o,e){const t=this;return t.macros[n.macroName]=function(...r){const s={...t.context,_self:t.macros};return h.async.forEach(n.parameters,function(t,e){if(void 0!==r[e])s[t]=r[e];else{if(void 0!==n.defaults[t])return h.expression.parseAsync.call(this,n.defaults[t],o).then(e=>(s[t]=e,h.Promise.resolve()));s[t]=void 0}return!0}).then(()=>t.parseAsync(n.output,s))},{chain:e,output:""}}},{type:h.logic.type.endmacro,regex:/^endmacro$/,next:[],open:!1},{type:h.logic.type.import_,regex:/^import\s+(.+)\s+as\s+(\w+)$/,next:[],open:!0,compile(e){var t=e.match[1].trim(),r=e.match[2].trim();return delete e.match,e.expression=t,e.contextName=r,e.stack=h.expression.compile.call(this,{type:h.expression.type.expression,value:t}).stack,e},parse(r,s,e){const t=this,n={chain:e,output:""};return"_self"===r.expression?(s[r.contextName]=t.macros,n):h.expression.parseAsync.call(t,r.stack,s).then(e=>t.template.importFile(e||r.expression)).then(e=>{const t=new h.ParseState(e);return t.parseAsync(e.tokens).then(()=>(s[r.contextName]=t.macros,n))})}},{type:h.logic.type.from,regex:/^from\s+(.+)\s+import\s+([a-zA-Z0-9_, ]+)$/,next:[],open:!0,compile(e){var t=e.match[1].trim(),r={};for(const n of e.match[2].trim().split(/\s*,\s*/)){var s=n.match(/^(\w+)\s+as\s+(\w+)$/);s?r[s[1].trim()]=s[2].trim():n.match(/^(\w+)$/)&&(r[n]=n)}return delete e.match,e.expression=t,e.macroNames=r,e.stack=h.expression.compile.call(this,{type:h.expression.type.expression,value:t}).stack,e},parse(r,s,n){const t=this;let e;return(e="_self"===r.expression?h.Promise.resolve(t.macros):h.expression.parseAsync.call(t,r.stack,s).then(e=>t.template.importFile(e||r.expression)).then(e=>{const t=new h.ParseState(e);return t.parseAsync(e.tokens).then(()=>t.macros)})).then(e=>{for(const t in r.macroNames)void 0!==e[t]&&(s[r.macroNames[t]]=e[t]);return{chain:n,output:""}})}},{type:h.logic.type.embed,regex:/^embed\s+(.+?)(?:\s+(ignore missing))?(?:\s+with\s+([\S\s]+?))?(?:\s+(only))?$/,next:[h.logic.type.endembed],open:!0,compile(e){var t=e["match"],r=t[1].trim(),s=void 0!==t[2],n=t[3],t=void 0!==t[4]&&t[4].length;return delete e.match,e.only=t,e.ignoreMissing=s,e.stack=h.expression.compile.call(this,{type:h.expression.type.expression,value:r}).stack,void 0!==n&&(e.withStack=h.expression.compile.call(this,{type:h.expression.type.expression,value:n.trim()}).stack),e},parse(r,e,t){let s={},n=h.Promise.resolve(),o=this;return r.only||(s={...e}),(n=void 0!==r.withStack?h.expression.parseAsync.call(o,r.withStack,e).then(e=>{s={...s,...e}}):n).then(()=>h.expression.parseAsync.call(o,r.stack,s)).then(e=>{var t=new h.Template({data:r.output,base:o.template.base,path:o.template.path,url:o.template.url,name:o.template.name,method:o.template.method,options:o.template.options});try{t.importFile(e)}catch(e){if(r.ignoreMissing)return"";throw o=null,e}return t.parentTemplate=e,t.renderAsync(s,{isInclude:!0})}).then(e=>({chain:t,output:e}))}},{type:h.logic.type.endembed,regex:/^endembed$/,next:[],open:!1},{type:h.logic.type.with,regex:/^(?:with(?:\s+([\S\s]+?))?)(?:\s|$)(only)?$/,next:[h.logic.type.endwith],open:!0,compile(e){var t=e["match"],r=t[1],t=void 0!==t[2]&&t[2].length;return delete e.match,e.only=t,void 0!==r&&(e.withStack=h.expression.compile.call(this,{type:h.expression.type.expression,value:r.trim()}).stack),e},parse(e,t,r){let s={},n;let o=h.Promise.resolve();e.only||(s={...t}),void 0!==e.withStack&&(o=h.expression.parseAsync.call(this,e.withStack,t).then(e=>{for(n in e)Object.hasOwnProperty.call(e,n)&&(s[n]=e[n])}));const i=new h.ParseState(this.template,void 0,s);return o.then(()=>i.parseAsync(e.output)).then(e=>({chain:r,output:e}))}},{type:h.logic.type.endwith,regex:/^endwith$/,next:[],open:!1},{type:h.logic.type.deprecated,regex:/^deprecated\s+(.+)$/,next:[],open:!0,compile(e){return console.warn("Deprecation notice: "+e.match[1]),e},parse(){return{}}}],h.logic.handler={},h.logic.extendType=function(e,t){h.logic.type[e]=t=t||"Twig.logic.type"+e},h.logic.extend=function(e){if(!e.type)throw new h.Error("Unable to extend logic definition. No type provided for "+e);h.logic.extendType(e.type),h.logic.handler[e.type]=e};0<h.logic.definitions.length;)h.logic.extend(h.logic.definitions.shift());return h.logic.compile=function(e){e=e.value.trim();let t=h.logic.tokenize.call(this,e);e=h.logic.handler[t.type];return e.compile&&(t=e.compile.call(this,t),h.log.trace("Twig.logic.compile: ","Compiled logic token to ",t)),t},h.logic.tokenize=function(e){let t=null;var r,s;let n=null;var o;let i=null;var p;for(t in e=e.trim(),h.logic.handler)if(Object.hasOwnProperty.call(h.logic.handler,t))for(r=h.logic.handler[t].type,s=h.logic.handler[t].regex,n=s,o=(n=Array.isArray(s)?n:[s]).length,i=0;i<o;i++)if(null!==(p=n[i].exec(e)))return h.log.trace("Twig.logic.tokenize: ","Matched a ",r," regular expression of ",p),{type:r,match:p};throw new h.Error("Unable to parse '"+e.trim()+"'")},h.logic.parse=function(s,n,o,e){return h.async.potentiallyAsync(this,e,function(){h.log.debug("Twig.logic.parse: ","Parsing logic token ",s);var e=h.logic.handler[s.type];let t;const r=this;return e.parse?(r.nestingStack.unshift(s),t=e.parse.call(r,s,n||{},o),h.isPromise(t)?t=t.then(e=>(r.nestingStack.shift(),e)):r.nestingStack.shift(),t):""})},h}},64:function(e,t){e.exports=function(e){"use strict";e.Templates.registerParser("source",e=>e.data||"")}},65:function(e,t){e.exports=function(t){"use strict";t.Templates.registerParser("twig",e=>new t.Template(e))}},66:function(e,t,u){e.exports=function(c){"use strict";return c.path={},c.path.expandNamespace=function(s,e){var t=Object.keys(s),t=new RegExp(`^(?:@(${t.join("|")})/|(${t.join("|")})::)`);return e.replace(t,(e,t,r)=>{return s[void 0===t?r:t]+"/"})},c.path.parsePath=function(e,t){var r=e.options["namespaces"],t=t||"";let s=r&&"object"==typeof r?c.path.expandNamespace(r,t):t;return s=s===t?c.path.relativePath(e,t):s},c.path.relativePath=function(e,t){let r,s,n="/";var o,i=[];let p=t||"";if(e.url)r=void 0===e.base?e.url:e.base.replace(/([^/])$/,"$1/");else if(e.path){var t=u(33),a=t.sep||n,l=new RegExp("^\\.{1,2}"+a.replace("\\","\\\\"));p=p.replace(/\//g,a),r=(r=void 0!==e.base&&null===p.match(l)?(p=p.replace(e.base,""),e.base+a):t.normalize(e.path)).replace(a+a,a),n=a}else{if(!e.name&&!e.id||!e.method||"fs"===e.method||"ajax"===e.method)throw new c.Error("Cannot extend an inline template.");r=e.base||e.name||e.id}for((s=r.split(n)).pop(),s=s.concat(p.split(n));0<s.length;)"."!==(o=s.shift())&&(".."===o&&0<i.length&&".."!==i[i.length-1]?i.pop():i.push(o));return i.join(n)},c}},67:function(e,t){e.exports=function(s){"use strict";return s.tests={empty(e){if(null!=e){if("number"==typeof e)return!1;if(0<e.length)return!1;for(const t in e)if(Object.hasOwnProperty.call(e,t))return!1}return!0},odd(e){return e%2==1},even(e){return e%2==0},"divisible by"(e,t){return e%t[0]==0},divisibleby(e,t){return console.warn("`divisibleby` is deprecated use `divisible by`"),s.tests["divisible by"](e,t)},defined(e){return void 0!==e},none(e){return null===e},null(e){return this.none(e)},"same as"(e,t){return e===t[0]},sameas(e,t){return console.warn("`sameas` is deprecated use `same as`"),s.tests["same as"](e,t)},iterable(e){return e&&(s.lib.is("Array",e)||s.lib.is("Object",e))}},s.test=function(e,t,r){if(s.tests[e])return s.tests[e](t,r);throw s.Error("Test "+e+" is not defined.")},s.test.extend=function(e,t){s.tests[e]=t},s}},68:function(e,t){e.exports=function(a){"use strict";return a.ParseState.prototype.parseAsync=function(e,t){return this.parse(e,t,!0)},a.expression.parseAsync=function(e,t,r){return a.expression.parse.call(this,e,t,r,!0)},a.logic.parseAsync=function(e,t,r){return a.logic.parse.call(this,e,t,r,!0)},a.Template.prototype.renderAsync=function(e,t){return this.render(e,t,!0)},a.async={},a.isPromise=function(e){return e&&e.then&&"function"==typeof e.then},a.async.potentiallyAsync=function(e,n,o){if(n)return a.Promise.resolve(o.call(e));{n=e;e=o;let t=e.call(n),r=null,s=!0;if(a.isPromise(t)){if(t.then(e=>{t=e,s=!1}).catch(e=>{r=e}),null!==r)throw r;if(s)throw new a.Error("You are using Twig.js in sync mode in combination with async extensions.")}return t;return}},a.Thenable=function(e,t,r){this.then=e,this._value=r?t:null,this._state=r||0},a.Thenable.prototype.catch=function(e){return 1===this._state?this:this.then(null,e)},a.Thenable.resolvedThen=function(e){try{return a.Promise.resolve(e(this._value))}catch(e){return a.Promise.reject(e)}},a.Thenable.rejectedThen=function(e,t){if(!t||"function"!=typeof t)return this;var r=this._value;let s;try{s=t(r)}catch(e){s=a.Promise.reject(e)}return a.Promise.resolve(s)},a.Promise=function(e){let r=0,s=null,t=function(e,t){r=e,s=t};var n=function(e){t(1,e)},o=function(e){t(2,e)};try{e(n,o)}catch(e){o(e)}return 1===r?a.Promise.resolve(s):2===r?a.Promise.reject(s):(t=new a.FullPromise).promise},a.FullPromise=function(){let s=null;function r(e){e(p._value)}function n(e,t){t(p._value)}let i=function(e,t){var r;s=(r=s,e=[e=e,t,-2],r?-2===r[2]?r=[r,e]:r.push(e):r=e,r)};function e(e,t){p._state||(p._value=t,p._state=e,i=1===e?r:n,s=s&&(-2===s[2]?i(s[0],s[1]):s.forEach(e=>{i(e[0],e[1])}),null))}const p=new a.Thenable((s,n)=>{const e="function"==typeof s;if(1===p._state&&!e)return a.Promise.resolve(p._value);if(1===p._state)try{return a.Promise.resolve(s(p._value))}catch(e){return a.Promise.reject(e)}const o="function"==typeof n;return new a.Promise((t,r)=>{i(e?e=>{try{t(s(e))}catch(e){r(e)}}:t,o?e=>{try{t(n(e))}catch(e){r(e)}}:r)})});return e.promise=p,e},a.Promise.defaultResolved=new a.Thenable(a.Thenable.resolvedThen,void 0,1),a.Promise.emptyStringResolved=new a.Thenable(a.Thenable.resolvedThen,"",1),a.Promise.resolve=function(e){return 0===arguments.length||void 0===e?a.Promise.defaultResolved:a.isPromise(e)?e:""===e?a.Promise.emptyStringResolved:new a.Thenable(a.Thenable.resolvedThen,e,1)},a.Promise.reject=function(e){return new a.Thenable(a.Thenable.rejectedThen,e,2)},a.Promise.all=function(e){const r=new Array(e.length);return a.async.forEach(e,(e,t)=>{if(a.isPromise(e)){if(1!==e._state)return e.then(e=>{r[t]=e});r[t]=e._value}else r[t]=e}).then(()=>r)},a.async.forEach=function(r,s){const n=r?r.length:0;let o=0;return function e(){let t=null;do{if(o===n)return a.Promise.resolve()}while(t=s(r[o],o),o++,!t||!a.isPromise(t)||1===t._state);return t.then(e)}()},a}},69:function(e,t){e.exports=function(p){"use strict";return p.exports={VERSION:p.VERSION},p.exports.twig=function(e){var t=e["id"],r={strictVariables:e.strict_variables||!1,autoescape:null!==e.autoescape&&e.autoescape||!1,allowInlineIncludes:e.allowInlineIncludes||!1,rethrow:e.rethrow||!1,namespaces:e.namespaces};if(p.cache&&t&&p.validateId(t),void 0!==e.debug&&(p.debug=e.debug),void 0!==e.trace&&(p.trace=e.trace),void 0!==e.data)return p.Templates.parsers.twig({data:e.data,path:Object.hasOwnProperty.call(e,"path")?e.path:void 0,module:e.module,id:t,options:r});if(void 0!==e.ref){if(void 0!==e.id)throw new p.Error("Both ref and id cannot be set on a twig.js template.");return p.Templates.load(e.ref)}if(void 0===e.method)return void 0!==e.href?p.Templates.loadRemote(e.href,{id:t,method:"ajax",parser:e.parser||"twig",base:e.base,module:e.module,precompiled:e.precompiled,async:e.async,options:r},e.load,e.error):void 0!==e.path?p.Templates.loadRemote(e.path,{id:t,method:"fs",parser:e.parser||"twig",base:e.base,module:e.module,precompiled:e.precompiled,async:e.async,options:r},e.load,e.error):void 0;if(p.Templates.isRegisteredLoader(e.method))return p.Templates.loadRemote(e.name||e.href||e.path||t||void 0,{id:t,method:e.method,parser:e.parser||"twig",base:e.base,module:e.module,precompiled:e.precompiled,async:e.async,options:r},e.load,e.error);throw new p.Error('Loader for "'+e.method+'" is not defined.')},p.exports.extendFilter=function(e,t){p.filter.extend(e,t)},p.exports.extendFunction=function(e,t){p._function.extend(e,t)},p.exports.extendTest=function(e,t){p.test.extend(e,t)},p.exports.extendTag=function(e){p.logic.extend(e)},p.exports.extend=function(e){e(p)},p.exports.compile=function(e,t){var r=t.filename,s=t.filename;const n=new p.Template({data:e,path:s,id:r,options:t.settings["twig options"]});return function(e){return n.render(e)}},p.exports.renderFile=function(e,t,r){"function"==typeof t&&(r=t,t={});var s=(t=t||{}).settings||{};const n=s["twig options"];var o={path:e,base:s.views,load(e){n&&n.allowAsync?e.renderAsync(t).then(e=>r(null,e),r):r(null,String(e.render(t)))},error(e){r(e)}};if(n)for(const i in n)Object.hasOwnProperty.call(n,i)&&(o[i]=n[i]);p.exports.twig(o)},p.exports.__express=p.exports.renderFile,p.exports.cache=function(e){p.cache=e},p.exports.path=p.path,p.exports.filters=p.filters,p.exports.tests=p.tests,p.exports.functions=p.functions,p.exports.Promise=p.Promise,p}}}]);